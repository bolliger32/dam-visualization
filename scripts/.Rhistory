fakedata$BasDia.cm <- c(rep(2,244))
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
fakedata$Fire <- as.factor(c(rep("AMCR",244)))
fakedata$Cov1.2 <- c(rep(c(200,200,200,200,800,800,800,800),30),200,200,200,200)
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
dfCLVD <- subset(dfPinus, dfPinus$Fire=="CLVD" & !is.na(dfPinus$LastYearGrth.cm))
dfAMCR<- subset(dfPinus, dfPinus$Fire=="AMCR" & !is.na(dfPinus$LastYearGrth.cm))
dfFRDS <- subset(dfPinus, dfPinus$Fire=="FRDS" & !is.na(dfPinus$LastYearGrth.cm))
dfSTAR <- subset(dfPinus, dfPinus$Fire=="STAR" & !is.na(dfPinus$LastYearGrth.cm))
plot_AMCR <- ggplot(pred[pred$Shrub_height<51&pred$Ht.cm <= max(dfAMCR$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nAmerican Complex Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfAMCR,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
plot_AMCR
fakedata$Fire <- as.factor(c(rep("CLVD",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
CLVD <- ggplot(pred[pred$Ht.cm<=max(dfCLVD$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nCleveland Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfCLVD,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
fakedata$Fire <- as.factor(c(rep("FRDS",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
FRDS <- ggplot(pred[pred$Ht.cm<=max(dfFRDS$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nFreds Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfFRDS,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))
FRDS
fakedata$Fire <- as.factor(c(rep("STAR",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
STAR <- ggplot(pred[pred$Shrub_height>51&pred$Ht.cm <= max(dfSTAR$Ht.cm),])+
geom_line(aes(y= predicted,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nStar Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfSTAR,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))
STAR
require(gridExtra)
grid.arrange(STAR, FRDS,plot_AMCR,CLVD,ncol=2,nrow=2)
STAR
Ht.cm <- c(rep(seq(0,300,5),4))
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
predicted <- -.598 + 0.187 * fakedata$Ht.cm - .00683 * fakedata$Ht1.3 - .00054 * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
plot_AMCR <- ggplot(pred[pred$Shrub_height<51,])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nAmerican Complex Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_AMCR
hist(predicted)
# WORKS!
# STAR
### growth in cm = -.598 + (0.187-.00407)*Ht.cm - .00683*shrub ht - .00054 * Ht.cm * Shrub ht - 1.1096
### Test that's right
Ht.cm <- c(rep(seq(0,300,5),4))
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
predicted <- 1.1096 -.00407* fakedata$Ht.cm - .00683 * fakedata$Ht1.3 - .00054 * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
plot_STAR <- ggplot(pred[pred$Shrub_height>51 & pred$Ht.cm <= 220,])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nStar Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_STAR
Ht.cm <- c(rep(seq(0,300,5),4))
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
predicted <- -.598 + 0.187 * fakedata$Ht.cm - .00683 * fakedata$Ht1.3 - .00054 * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
plot_AMCR <- ggplot(pred[pred$Shrub_height<51,])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nAmerican Complex Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_AMCR
hist(predicted)
# WORKS!
# STAR
### growth in cm = -.598 + (0.187-.00407)*Ht.cm - .00683*shrub ht - .00054 * Ht.cm * Shrub ht - 1.1096
### Test that's right
Ht.cm <- c(rep(seq(0,300,5),4))
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
predicted <- 1.1096 -.00407* fakedata$Ht.cm - .00683 * fakedata$Ht1.3 - .00054 * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
plot_STAR <- ggplot(pred[pred$Shrub_height>51 & pred$Ht.cm <= 220,])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nStar Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_STAR
predicted <- 1.1096 +(0.187-.00407)* fakedata$Ht.cm - .00683 * fakedata$Ht1.3 - .00054 * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
plot_STAR <- ggplot(pred[pred$Shrub_height>51 & pred$Ht.cm <= 220,])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nStar Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_STAR
predicted <- 1.1096-.598 +(0.187-.00407)* fakedata$Ht.cm - .00683 * fakedata$Ht1.3 - .00054 * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
plot_STAR <- ggplot(pred[pred$Shrub_height>51 & pred$Ht.cm <= 220,])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nStar Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_STAR
plot_STAR <- ggplot(pred[pred$Shrub_height>51 & pred$Ht.cm <= 230,])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nStar Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_STAR
predicted <- .302-.598 +(0.187+.00123)* fakedata$Ht.cm - .00683 * fakedata$Ht1.3 - .00054 * fakedata$Ht.cm * fakedata$Ht1.3
summary(df$FRDS)
summary(dfFRDS)
plot_FRDS <- ggplot(pred[pred$Ht.cm<=max(dfFRDS$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nFreds Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_STAR
plot_FRDS
Ht.cm <- c(rep(seq(0,300,5),4))
length(Ht.cm)
fakedata <- as.data.frame(Ht.cm)
fakedata$BasDia.cm <- c(rep(2,244))
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
fakedata$Fire <- as.factor(c(rep("AMCR",244)))
fakedata$Cov1.2 <- c(rep(c(200,200,200,200,800,800,800,800),30),200,200,200,200)
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
dfCLVD <- subset(dfPinus, dfPinus$Fire=="CLVD" & !is.na(dfPinus$LastYearGrth.cm))
dfAMCR<- subset(dfPinus, dfPinus$Fire=="AMCR" & !is.na(dfPinus$LastYearGrth.cm))
dfFRDS <- subset(dfPinus, dfPinus$Fire=="FRDS" & !is.na(dfPinus$LastYearGrth.cm))
dfSTAR <- subset(dfPinus, dfPinus$Fire=="STAR" & !is.na(dfPinus$LastYearGrth.cm))
plot_AMCR <- ggplot(pred[pred$Shrub_height<51&pred$Ht.cm <= max(dfAMCR$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nAmerican Complex Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfAMCR,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
plot_AMCR
fakedata$Fire <- as.factor(c(rep("CLVD",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
CLVD <- ggplot(pred[pred$Ht.cm<=max(dfCLVD$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nCleveland Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfCLVD,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
fakedata$Fire <- as.factor(c(rep("FRDS",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
FRDS <- ggplot(pred[pred$Ht.cm<=max(dfFRDS$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nFreds Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfFRDS,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))
FRDS
FRDS
Ht.cm <- c(rep(seq(0,300,5),4))
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
predicted <- .3021076-.59848 +(0.187019+.0012349)* fakedata$Ht.cm - .0068351 * fakedata$Ht1.3 - .0005397 * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
plot_FRDS <- ggplot(pred[pred$Ht.cm<=max(dfFRDS$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nFreds Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_FRDS
Ht.cm <- c(rep(seq(0,300,5),4))
length(Ht.cm)
fakedata <- as.data.frame(Ht.cm)
fakedata$BasDia.cm <- c(rep(2,244))
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
fakedata$Fire <- as.factor(c(rep("AMCR",244)))
fakedata$Cov1.2 <- c(rep(c(200,200,200,200,800,800,800,800),30),200,200,200,200)
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
dfCLVD <- subset(dfPinus, dfPinus$Fire=="CLVD" & !is.na(dfPinus$LastYearGrth.cm))
dfAMCR<- subset(dfPinus, dfPinus$Fire=="AMCR" & !is.na(dfPinus$LastYearGrth.cm))
dfFRDS <- subset(dfPinus, dfPinus$Fire=="FRDS" & !is.na(dfPinus$LastYearGrth.cm))
dfSTAR <- subset(dfPinus, dfPinus$Fire=="STAR" & !is.na(dfPinus$LastYearGrth.cm))
plot_AMCR <- ggplot(pred[pred$Shrub_height<51&pred$Ht.cm <= max(dfAMCR$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nAmerican Complex Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfAMCR,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
plot_AMCR
fakedata$Fire <- as.factor(c(rep("CLVD",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
CLVD <- ggplot(pred[pred$Ht.cm<=max(dfCLVD$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nCleveland Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfCLVD,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
fakedata$Fire <- as.factor(c(rep("FRDS",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
FRDS <- ggplot(pred[pred$Ht.cm<=max(dfFRDS$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nFreds Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfFRDS,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))
FRDS
FRDS
summary(fakedata)
summary(as.factor(fakedata$Ht1.3))
Ht.cm <- c(rep(seq(0,300,5),4))
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
predicted <- .3021076-.59848 +(0.187019+.0012349)* fakedata$Ht.cm - .0068351 * fakedata$Ht1.3 - .0005397 * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
summary(as.factor(fakedata$Ht1.3))
length(Ht.cm)
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
fakedata$Fire <- as.factor(c(rep("AMCR",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
dfCLVD <- subset(dfPinus, dfPinus$Fire=="CLVD" & !is.na(dfPinus$LastYearGrth.cm))
dfAMCR<- subset(dfPinus, dfPinus$Fire=="AMCR" & !is.na(dfPinus$LastYearGrth.cm))
dfFRDS <- subset(dfPinus, dfPinus$Fire=="FRDS" & !is.na(dfPinus$LastYearGrth.cm))
dfSTAR <- subset(dfPinus, dfPinus$Fire=="STAR" & !is.na(dfPinus$LastYearGrth.cm))
plot_AMCR <- ggplot(pred[pred$Shrub_height<51&pred$Ht.cm <= max(dfAMCR$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nAmerican Complex Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfAMCR,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
plot_AMCR
fakedata$Fire <- as.factor(c(rep("CLVD",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
CLVD <- ggplot(pred[pred$Ht.cm<=max(dfCLVD$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nCleveland Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfCLVD,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
fakedata$Fire <- as.factor(c(rep("FRDS",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
predicted_freds <- predicted
plot(predicted_freds)
Ht.cm <- c(rep(seq(0,300,5),4))
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
predicted <- .3021076-.59848 +(0.187019+.0012349)* fakedata$Ht.cm - .0068351 * fakedata$Ht1.3 - .0005397 * fakedata$Ht.cm * fakedata$Ht1.3
plot(predicted)
predicted <- .3021076-.5984835 +(0.1870199+.0012349)* fakedata$Ht.cm - .0068351 * fakedata$Ht1.3 - .0005397 * fakedata$Ht.cm * fakedata$Ht1.3
plot(predicted)
plot(predicted_freds)
predicted <- .3021076-.5984835 +(0012349)* fakedata$Ht.cm - .0068351 * fakedata$Ht1.3 - .0005397 * fakedata$Ht.cm * fakedata$Ht1.3
plot(predicted)
predicted <- .3021076-.5984835 +(.0012349)* fakedata$Ht.cm - .0068351 * fakedata$Ht1.3 - .0005397 * fakedata$Ht.cm * fakedata$Ht1.3
plot(predicted)
predicted <- .3021076-.5984835 +(.1870188+.0012349)* fakedata$Ht.cm - .0068351 * fakedata$Ht1.3 - .0005397 * fakedata$Ht.cm * fakedata$Ht1.3
plot(predicted)
plot(predicted_freds)
Ht.cm <- c(rep(seq(0,300,5),4))
length(Ht.cm)
fakedata <- as.data.frame(Ht.cm)
fakedata$Ht1.3 <- c(rep(c(5,50,100,150),61))
fakedata$Fire <- as.factor(c(rep("AMCR",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
dfCLVD <- subset(dfPinus, dfPinus$Fire=="CLVD" & !is.na(dfPinus$LastYearGrth.cm))
dfAMCR<- subset(dfPinus, dfPinus$Fire=="AMCR" & !is.na(dfPinus$LastYearGrth.cm))
dfFRDS <- subset(dfPinus, dfPinus$Fire=="FRDS" & !is.na(dfPinus$LastYearGrth.cm))
dfSTAR <- subset(dfPinus, dfPinus$Fire=="STAR" & !is.na(dfPinus$LastYearGrth.cm))
plot_AMCR <- ggplot(pred[pred$Shrub_height<51&pred$Ht.cm <= max(dfAMCR$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nAmerican Complex Fire")+
ylim(0,55)+
xlim(0,300)+
geom_point(data=dfAMCR,aes(y=LastYearGrth.cm,x=Ht.cm,col=Ht1.3))+
xlab("Seedling height")+
ylab("Seedling growth")
plot_AMCR
fakedata$Fire <- as.factor(c(rep("CLVD",244)))
predicted <- predict(SORTIE_pinus, fakedata)
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
pred$Fire <- fakedata$Fire
pred$Grth <- fakedata$LastYearGrth.cm
predicted_clvd <- predicted
summary(SORTIE_pinus)$coefficients
summary(SORTIE_pinus)$coefficients[5]
summary(SORTIE_pinus)$coefficients[5]*1000000000000
coefs <- summary(SORTIE_pinus)$coefficients
coefs[1]
coefs[2]
coefs[8]
coefs[3]
coefs
length(coefs)
coefs[10]
predicted <- coefs[5] +coefs[1] +(coefs[2] + coefs[8])* fakedata$Ht.cm + coefs[3] * fakedata$Ht1.3 + coefs[10] * fakedata$Ht.cm * fakedata$Ht1.3
pred <- as.data.frame(predicted)
pred$Shrub_height <- fakedata$Ht1.3
pred$Ht.cm <- fakedata$Ht.cm
plot_FRDS <- ggplot(pred[pred$Ht.cm<=max(dfFRDS$Ht.cm),])+
geom_line(aes(y= predicted ,x=Ht.cm,group=Shrub_height,col=Shrub_height))+
scale_color_gradient(low="blue",high="red")+
labs(title = "Predicted seedling growth,\nFreds Fire")+
ylim(0,55)+
xlim(0,300)+
xlab("Seedling height")+
ylab("Seedling growth")
plot_FRDS
names(df)
getwd()
setwd("~/dam-visualization")
library(dams)
write.csv(dams, file="../data/dams.csv",row.names = F)
##################################################################################
### THIS SCRIPT DOWNLOADS THE NID DAMS DATA SET, CLEANS IT, AND RESAVES IT AS .CSV
##################################################################################
### DEFINE YOUR NATEL DIRECTORY - uncomment this when working in Rstudio
#setwd("~/dam-visualization/scripts")
library(dams)
library(dplyr)
dams <- get_nid()
dams_bu <- dams
summary(as.factor(dams$State_Reg_Dam))
### SELECT COLUMNS OF INTEREST - THESE WILL BE NARROWED DOWN LATER
dams <- dams %>%
select(Dam_Name,NID_ID,Longitude,Latitude,River,Owner_Name,Owner_Type,Dam_Type,Primary_Purpose,All_Purposes,Year_Completed,Dam_Length,Dam_Height,Structural_Height,Hydraulic_Height,NID_Height,Max_Discharge,Max_Storage,Normal_Storage,NID_Storage,Surface_Area,Drainage_Area,Permitting_Authority,State_Reg_Dam,State_Reg_Agency, Fed_Owner, Fed_Operation, Source_Agency, State,Url_Address,Submit_Date)
### CHECK FOR N/A VALUES
lapply(dams, function(x) which(is.na(x) ) )
### THROW OUT ROWS WITH N/A LAT OR LONG
dams <- dams[!is.na(dams$Latitude)&!is.na(dams$Longitude),]
### PLOT and SAVE AS .CSV
plot(dams$Longitude,dams$Latitude)
write.csv(dams, file="../data/dams.csv",row.names = F)
# take out vol
dams <- dams[!is.na(dams$Latitude)&!is.na(dams$Longitude),]
write.csv(dams, file="../data/dams.csv",row.names = F)
getwd()
setwd("~/dam-visualization/scripts")
setwd("~/dam-visualization/scripts")
write.csv(dams, file="../data/dams.csv",row.names = F)
library(dams)
library(dplyr)
dams <- get_nid()
dams_bu <- dams
### SELECT COLUMNS OF INTEREST - THESE WILL BE NARROWED DOWN LATER
dams <- dams %>%
select(Dam_Name,NID_ID,Longitude,Latitude,River,Owner_Name,Owner_Type,Dam_Type,Primary_Purpose,All_Purposes,Year_Completed,Dam_Length,Dam_Height,Structural_Height,Hydraulic_Height,NID_Height,Max_Discharge,Max_Storage,Normal_Storage,NID_Storage,Surface_Area,Drainage_Area,Permitting_Authority,State_Reg_Dam,State_Reg_Agency, Fed_Owner, Fed_Operation, Source_Agency, State,Url_Address,Submit_Date)
### THROW OUT ROWS WITH N/A LAT OR LONG
dams <- dams[!is.na(dams$Latitude)&!is.na(dams$Longitude),]
install.packages(rjson)
install.packages("rjson")
library(rjon)
library(rjson)
?toJSON
damsjson <- toJSON(dams)
plot(damsjson)
write(damsjson, file="dams_geojson")
getwd()
write(damsjson, file="dams_geojson.json")
library(rgdal)
?ogr2ogr
??ogr2ogr
